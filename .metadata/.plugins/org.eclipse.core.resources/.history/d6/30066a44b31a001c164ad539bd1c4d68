/*
 ============================================================================
*Programa   :TP 1
*
*Objetivo   :Realizar una cacluladora con las operaciones:
			 Sumar, restar, multiplicar dividir y el factorial

*Version    : 0.1 fecha fin
*Autor      : Alanoca Aduviri Jonathan Gerardo (Div A)
*
 ============================================================================
 */

#include <stdio.h>
#include <stdlib.h>

void resultados(int suma,int resta,int multiplicacion,float division,long factorial1,long factorial2);
int calcularOperaciones(int num1,int  num2,int* suma, int* pResta, int* pMultiplicacion, float* pDivisions, long* pFactorial1, long* pFactotial2);
int ingresarNumero(int* numero);

int main(void) {
	setbuf(stdout, NULL);
	int num1=0;
	int num1Validado=0;
	int num2=0;
	int num2Validado=0;
	int opcion;
	int suma;
	int resta;
	int multiplicacion;
	float division;
	long factorial1=0;
	long factorial2=0;
	int continuar=1;

	do{
		printf("1- Ingresar el 1er operando (A=%d).\n", num1);
		printf("2- Ingresar el 2do operando (B=%d).\n", num2);
		printf("3- Calcular todas las operaciones.\n");
		printf("4- informar resultados.\n");
		printf("5- Salir.\n");
		scanf("%d", &opcion);
		switch(opcion){
			case 1:
				if (ingresarNumero(&num1)){
					num1Validado=1;
				}
				else{
					printf("No se pudo cargar el 1er operando.\n");
				}
				break;
			case 2:
				if (ingresarNumero(&num2)){
					num2Validado=1;
				}
				else{
					printf("No se pudo cargar el 2do operando.\n");
				}
				break;
			case 3:
				if(!num1Validado || !num2Validado){
					printf("Antes de calcular, por favor cargar los valores de los operandos.\n");
				}
				else{

					printf("Se han calculado las operaciones al %d %%.\n",calcularOperaciones(num1,num2, &suma, &resta, &multiplicacion, &division, &factorial1, &factorial2));
				}
				break;
			case 4:
				resultados(suma, resta, multiplicacion, division, factorial1, factorial2);
				break;
			case 5:
				continuar=0;
				break;
			default:
				printf("Por favor intente nuevamente.\n");

		}
	}while(continuar);
	return EXIT_SUCCESS;
}

int ingresarNumero(int* numero){
	int todoOk;
	printf("Ingrese: ");
	todoOk=scanf("%d", numero);
	fflush(stdin);
	return todoOk;
}

int calcularOperaciones(int numero1,int numero2,int* pSuma, int* pResta, int* pMultiplicacion, float* pDivision, long* pFactorial1, long* pFactorial2){
	int i;
	int porcentaje=3;
	*pSuma=numero1+numero2;
	*pResta=numero1-numero2;
	*pMultiplicacion=numero1*numero2;
	if(numero2!=0){
		*pDivision=(float) numero1/numero2;
		porcentaje++;
	}
	if (numero1>=0){
		*pFactorial1=1;
		porcentaje++;
		for(i=1; i<=numero1;i++){
			*pFactorial1*=i;
		}
	}
	if (numero2>=0){
		*pFactorial2=1;
		porcentaje++;
		for(i=1; i<=numero2;i++){
			*pFactorial2*=i;
		}
	}
	return porcentaje*100/6;
}
void resultados(int suma,int resta,int multiplicacion,float division,long factorial1,long factorial2){
	printf("El resultado de A+B es: %d\n", suma);
	printf("El resultado de A-B es: %d\n",resta);

	if(multiplicacion==0 && resta==suma){// Lo que quiero verificar es si el 2do operado es cero
		printf("No existe la division por cero.\n");
	}else{
		printf("El resultado de A/B es: %.4f\n", division);
	}


	printf("El resultado de A*B es: %d\n", multiplicacion);

	if(factorial1==0){
		printf("El factorial de A es: No existe factorial negativo ");
	}
	else{
		printf("El factorial de A es: %ld ", factorial1);
	}
	if(factorial2==0){
		printf("y el factorial de B es: No existe factorial nevagivo.\n");
	}
	else{
		printf("y el factorial de b es: %ld \n", factorial2);
	}

}
